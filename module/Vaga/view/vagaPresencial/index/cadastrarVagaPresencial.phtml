<?php
$listaEmpresa = $this->listaEmpresa;
$listaVaga = $this->vagas;
$listaAluno = $this->listaAluno;
$idaluno = $this->idaluno;
?>
<script>
    
    $(document).ready(function(){ 
        $('.date').datepicker({
    	format: 'yyyy-mm-dd',
    	language: 'pt-BR',
    	todayHighlight: true
    });
    $("#vagaForm").validate({
      messages: {
        bolsa: 'Valor da bolsa inválido',
        curso: 'Por favor digite o curso',
        carga: 'Digite a carga (máximo: 30 horas)',
        inicio: 'Por favor, entre com uma data',
        empresa: 'Por favor selecione a empresa'
    },
    errorElement: "em",
    highlight: function(element) {
    $("em").css({color:"red"});
    $(element.form).find("." + element.id )
            .addClass("has-error")
            .removeClass("has-succes");
    $("."+element.id+"-valid").css("display","none");
            
    },
    unhighlight: function(element) {
    $(element.form).find("." + element.id)
            .removeClass("has-error")
            .addClass("has-success");
    
    $("."+element.id+"-valid").css({
        display: "inline",
        color: "green"
    });     
    },
    rules:{
        bolsa: {
           required: true,
           range: [1, 5000]
        },
        curso: {
           required: true
        },
        carga: {
           required: true,
           range: [1, 30]
        },
        inicio: {
           required: true
        },
        empresa: {
           required: true
        }
    }
    });
    
    });
    
</script> 
<div>
    <div>
    <div  class=" panel panel-primary well-lg">
        <div class="panel-heading"> 
            <div class="row bs-wizard " style="border-bottom:0;">     
                <div class="col-xs-4 bs-wizard-step active">
                  <div class="bs-wizard-info text-center bs-wizard-stepnum">Cadastro</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <a href="#" class="bs-wizard-dot"></a>
                  <div class="bs-wizard-info text-center">  
                  </div>
                </div> 
                <div class="col-xs-4 bs-wizard-step disabled"><!-- complete -->
                  <div class="bs-wizard-info text-center bs-wizard-stepnum">Documentos</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <a href="#" class="bs-wizard-dot"></a>
                  <div class="bs-wizard-info text-center">
                  </div>
                </div>
                <div class="col-xs-4 bs-wizard-step disabled"><!-- complete -->
                  <div class="bs-wizard-info text-center bs-wizard-stepnum">Fim</div>
                  <div class="progress"><div class="progress-bar"></div></div>
                  <a href="#" class="bs-wizard-dot"></a>
                  <div class="bs-wizard-info text-center">
                  </div>
                </div>
            </div><br>     
        </div>
        <?php
                $this->vagaForm->prepare();
                echo 
                $this->form()->openTag($this->vagaForm);    
         ?>
        <br/>
                            <div class="row">
                            <div class="aluno col-sm-5 col-sm-offset-1">
                                <label for="aluno" >Aluno </label> <i style=" display: none;"  class=" aluno-valid glyphicon glyphicon-ok-circle"></i>
                                    <?php 
                                        foreach ($this->aluno as $f):
                                            echo $this->formRow($this->vagaForm->get("aluno")
                                                ->setValueOptions([
                                                $f->getNome() => $f->getNome()
                                                ])
                                                ->setAttribute('class', 'form-control')
                                                ->setAttribute('id', 'aluno'));
                                        endforeach;
                                    ?>  
                            </div> 
                            <div class=" curso col-sm-5">
                                <label for="curso">Curso </label> <i style=" display: none;"  class=" curso-valid glyphicon glyphicon-ok-circle"></i>
                                <select name="curso" id="curso" class="form-control">
                                        <option></option>
                                        <?php  foreach ( $this->listaDados as $chave => $l): ?>
                                        <option value="<?= $l->getIddados()?>"><?= $l->getCurso()?></option>
                                        <?php endforeach; ?> 
                                    </select>
                            </div>
                            </div>
                            <br/>
                            <div class="row">            
                            <div class="col-sm-5 agente col-sm-offset-1">
                                <label for="agente"><?= $this->translate('Agente ')?></label> <i style=" display: none;"  class=" agente-valid glyphicon glyphicon-ok-circle"></i>
                                    <select name="agente" id="agente" class="form-control" >
                                        <?=  '<option>N/C</option>';
                                        foreach ($this->listaAgente as $f): 
                                        echo '<option>'.$f->getAgente().'</option>';
                                        endforeach; ?>  
                                    </select>
                            </div>
                            <div class="col-sm-5 nome">
                                <label for="empresa"><?= $this->translate('Empresa ')?></label> <i style=" display: none;"  class=" empresa-valid glyphicon glyphicon-ok-circle"></i>
                                    <select name="empresa" id="empresa" class="form-control" >
                                        <?=  '<option></option>';
                                        foreach ($listaEmpresa as $f): 
                                        echo '<option>'.$f->getEmpresa().'</option>';
                                        endforeach; ?>  
                                    </select>
                            </div>
                            </div>
                            <br/>
                            <div class="row">
                            <div class="  col-sm-3 carga col-sm-offset-1">
                                <label for="carga"><?= $this->translate('Carga ')?></label> <i style=" display: none;"  class=" carga-valid glyphicon glyphicon-ok-circle"></i>
                                 <?= $this->formRow($this->vagaForm->get("carga")
                                                ->setAttribute('class', 'form-control')
                                                ->setAttribute('id', 'carga'))?>
                            </div>
                            <div class="col-sm-3 bolsa">
                                <label for="bolsa"><?= $this->translate('Bolsa ')?></label> <i style=" display: none;"  class=" bolsa-valid glyphicon glyphicon-ok-circle"></i>
                                <?= $this->formRow($this->vagaForm->get("bolsa")
                                                ->setAttribute('class', 'form-control')
                                                ->setAttribute('id', 'bolsa'))?>
                            </div> 
                                <div class="  col-sm-4 inicio">
                                    <div >
                                        <label for="inicio"><?= $this->translate('Início ')?></label> <i style=" display: none;"  class=" inicio-valid glyphicon glyphicon-ok-circle"></i>
                                        <?= $this->formRow($this->vagaForm->get("inicio")
                                                ->setAttribute('class', 'form-control date')
                                                ->setAttribute('id', 'inicio'))
                                        ?>
                                    </div>
                                </div>
                            </div>      
                            <br/> 
                            <button    type="submit" class="btn btn-success col-sm-offset-1 " ><i class="fa fa-check-square-o fa-2x pull-left"></i>Salvar<br>Vaga</button> 
                            <a  href="<?= $this->url('empresa/default', array('controller' => 'empresa', 'action' => 'cadastrarEmpresa', 'id'=>$idaluno)); ?>"><span class="btn btn-primary" ><i class="fa fa-briefcase fa-2x pull-left"></i>Cadastrar<br> Empresa</span></a>
                             
                            <?= '<a  href="'. $this->url('perfil/default', array('controller' => 'alunoPresencial', 'action' => 'perfil','id'=>$idaluno)).'"><span class="btn btn-primary" ><i class="fa fa-arrow-left fa-2x pull-left"></i>Voltar ao <br>Painel</span></a>';?>
                          
                                        <?= $this->form()->closeTag();?>
        </div>
    </div>
</div>
<?=$this->resp; ?>
